% This is file apatitlepage.sty
% Most code Copyright (C) 2011-2017 by Brian D. Beitzel <brian at beitzel.com>
% Modifications Copyright 2017 by Alan Munn
%
% The following code is adapted from the apa6 documentclass. Most of it is copied verbatim except for
% a few name changes to avoid potential document class clashes. It does not do anonymization.
% The following commands have been renamed: (along with their internal versions):
%
% \author -> \APAauthor
% \title -> \APAtitle
% \shorttitle -> \APAshorttitle
% \maketitle -> \APAmaketitle
% \abstract -> \APAabstract
% \keywords -> \APAkeywords
% \authornote -> \APAauthornote
% \note -> \APAnote
%
% The following commands have been added:
%
% \APAtitleformat -> defaults to \LARGE
% \APAauthformat -> defaults to \large
% \APAaffilformat -> defaults to {}
%
% Use \renewcommand to change these formats as needed
% 
%
% All other author/affiliation commands remain the same as in the apa6 class
% Please refer to the documentation of the class for how to use them.
%
%
% This package may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This package has the LPPL maintenance status `maintained'.
% 
% The Current Maintainer of this package is Alan Munn.
%
% This package consists of the file 
%
% apaptitlepage.sty 
% 
% and the documentation files:
%
% apatitlepage.tex, apatitlepage.pdf
%
% and an example document
%
% apatitlpage-test.tex, apatitlepage-test.pdf
%
% Version 1.0 2017/10/10
%
\NeedsTeXFormat{LaTeX2e}[2003/12/01]
\ProvidesPackage{apatitlepage}[2017/10/10 v1.0 Use apa6 journal title page style in another document.]
% New commands added
\newcommand*\APAtitleformat{\LARGE}
\newcommand*\APAauthformat{\large}
\newcommand*\APAaffilformat{}
% Modified apa6 code starts here
\newcommand*\acksname{Author Note}
\newcommand*\keywordname{Keywords}
\long\def\APAnote#1{\long\def\@APAnote{#1}}
\long\def\APAtitle#1{\long\def\@APAtitle{#1}}
\long\def\APAauthor#1{\long\def\@APAauthor{#1}}
\long\def\APAshorttitle#1{\long\def\@APAshorttitle{#1}}
\long\def\twoauthors#1#2{\long\def\@authorOne{#1}\long\def\@authorTwo{#2}%
 \long\def\@APAauthor{#1}}
\long\def\onetwoauthors#1#2#3{\long\def\@authorOne{#1}\long\def\@authorTwo{#2}%
 \long\def\@authorThree{#3}\long\def\@APAauthor{#1}}
\long\def\twooneauthors#1#2#3{\long\def\@authorOne{#1}\long\def\@authorTwo{#2}%
 \long\def\@authorThree{#3}\long\def\@APAauthor{#1}\def\@twofirst{1}}
\let\threeauthors=\onetwoauthors
\long\def\fourauthors#1#2#3#4{\long\def\@authorOne{#1}\long\def\@authorTwo{#2}%
 \long\def\@authorThree{#3}\long\def\@authorFour{#4}\long\def\@APAauthor{#1}}
\long\def\fiveauthors#1#2#3#4#5{\long\def\@authorOne{#1}\long\def\@authorTwo{#2}%%%%
 \long\def\@authorThree{#3}\long\def\@authorFour{#4}\long\def\@authorFive{#5}%    %%
 \long\def\@APAauthor{#1}} %%     2006/01/05 -- added as contributed by Aaron Geller %%
\long\def\sixauthors#1#2#3#4#5#6{\long\def\@authorOne{#1}%                  %% thp 2006/01/05
 \long\def\@authorTwo{#2}\long\def\@authorThree{#3}\long\def\@authorFour{#4}%% thp 2006/01/05
 \long\def\@authorFive{#5}\long\def\@authorSix{#6}\long\def\@APAauthor{#1}}    %% thp 2006/01/05
\long\def\affiliation#1{\long\def\@affil{#1}}
\long\def\twoaffiliations#1#2{\long\def\@affilOne{#1}\long\def\@affilTwo{#2}%
\long\def\@affil{#1}}
\long\def\onetwoaffiliations#1#2#3{\long\def\@affilOne{#1}\long\def\@affilTwo{#2}%
 \long\def\@affilThree{#3}\long\def\@affil{#1}}
\long\def\twooneaffiliations#1#2#3{\long\def\@affilOne{#1}\long\def\@affilTwo{#2}%
 \long\def\@affilThree{#3}\long\def\@affil{#1}}
\let\threeaffiliations=\onetwoaffiliations
\long\def\fouraffiliations#1#2#3#4{\long\def\@affilOne{#1}\long\def\@affilTwo{#2}%
 \long\def\@affilThree{#3}\long\def\@affilFour{#4}\long\def\@affil{#1}}
\long\def\fiveaffiliations#1#2#3#4#5{\long\def\@affilOne{#1}\long\def\@affilTwo{#2}%%
 \long\def\@affilThree{#3}\long\def\@affilFour{#4}\long\def\@affilFive{#5}%        %%
 \long\def\@affil{#1}} %%     2006/01/05 -- added as contributed by Aaron Geller   %%
\long\def\sixaffiliations#1#2#3#4#5#6{\long\def\@affilOne{#1}%           %% thp 2006/01/05
 \long\def\@affilTwo{#2}\long\def\@affilThree{#3}\long\def\@affilFour{#4}%% thp 2006/01/05
 \long\def\@affilFive{#5}\long\def\@affilSix{#6}\long\def\@affil{#1}}    %% thp 2006/01/05
\long\def\APAnote#1{\long\def\@APAnote{#1}}
\long\def\APAabstract#1{\long\def\@APAabstract{#1}}
\long\def\APAkeywords#1{\long\def\@APAkeywords{#1}}
\long\def\APAauthornote#1{\long\def\@APAacks{#1}}
\def\check@author{%
 \@ifundefined{@APAauthor}{%
  \PackageWarningNoLine{apatitlepage}{Author not defined}\def\@APAauthor{Author}}{}
 \@ifundefined{@APAtitle}{%
  \PackageWarningNoLine{apatitlepage}{Title not defined}\def\@APAtitle{Title}}{}
 \@ifundefined{@APAshorttitle}{%
  \PackageWarningNoLine{apatitlepage}{Short title not defined}\def\@APAshorttitle{INSERT SHORTTITLE COMMAND IN PREAMBLE}}{}
 \@ifundefined{@affil}{%
  \PackageWarningNoLine{apatitlepage}{Affiliation not defined}\def\@affil{Affiliation}}{}
 \@ifundefined{@APAabstract}{%
  \PackageWarningNoLine{apatitlepage}{Abstract not defined}}{}
 \@ifundefined{@APAkeywords}{%
  \PackageInfo{apatitlepage}{Keywords not defined}}{}
 \@ifundefined{@authorSix}{%                                   % -- thp 2006/01/05
  \@ifundefined{@authorFive}{%                                 % -- thp 2006/01/05
   \@ifundefined{@authorFour}{%
    \@ifundefined{@authorThree}{%
     \@ifundefined{@authorTwo}{%
     }{\@ifundefined{@affilTwo}{\@error@toomanyauthors}{}}
    }{\@ifundefined{@affilThree}{\@error@toomanyauthors}{}}
   }{\@ifundefined{@affilFour}{\@error@toomanyauthors}{}}
  }{\@ifundefined{@affilFive}{\@error@toomanyauthors}{}}       % -- thp 2006/01/05
 }{\@ifundefined{@affilSix}{\@error@toomanyauthors}{}}         % -- thp 2006/01/05
 \@ifundefined{@affilSix}{%                                    % -- thp 2006/01/05
  \@ifundefined{@affilFive}{%                                  % -- thp 2006/01/05
   \@ifundefined{@affilFour}{%
    \@ifundefined{@affilThree}{%
     \@ifundefined{@affilTwo}{%
     }{\@ifundefined{@authorTwo}{\@error@toomanyaffils}{}}
    }{\@ifundefined{@authorThree}{\@error@toomanyaffils}{}}
   }{\@ifundefined{@authorFour}{\@error@toomanyaffils}{}}
  }{\@ifundefined{@authorFive}{\@error@toomanyaffils}{}}       % -- thp 2006/01/05
 }{\@ifundefined{@authorSix}{\@error@toomanyaffils}{}}         % -- thp 2006/01/05
}
\def\put@one@authaffil#1#2{%
  \parbox[t]{\textwidth}{\begin{center}{\APAauthformat #1\vspace{0in}}%
                        {\\\APAaffilformat #2\vspace{0.05in}\\}\end{center}}}

\newsavebox\auone@box
\newsavebox\autwo@box
\newsavebox\autot@box
\newlength\auone@boxwidth
\newlength\autwo@boxwidth
\newlength\autot@boxwidth

\def\default@d@authaffil#1#2#3#4{%
        \parbox[t]{\columnwidth}{\begin{center}{\APAauthformat #1\vspace{0in}}%
                                {\\\APAauthformat #2\vspace{0.05in}\\}\end{center}}%
        \parbox[t]{\columnwidth}{\begin{center}{\APAauthformat #3\vspace{0in}}%
                                {\\\APAauthformat #4\vspace{0.05in}\\}\end{center}}}

\def\uneven@d@authaffil#1#2#3#4{%
     \hfill\parbox[t]{\auone@boxwidth}{\begin{center}{\APAauthformat #1\vspace{0in}}%
                                      {\\\APAauthformat #2\vspace{0.05in}\\}\end{center}}\hfill\hfill%
           \parbox[t]{\autwo@boxwidth}{\begin{center}{\APAauthformat #3\vspace{0in}}%
                                      {\\\APAauthformat #4\vspace{0.05in}\\}\end{center}}\hfill}

\def\put@two@authaffil#1#2#3#4{%
     \let\disp@authaffil\default@d@authaffil
     \sbox\auone@box{\begin{tabular}{c}\APAauthformat #1\\\APAauthformat #2\end{tabular}}
     \settowidth{\auone@boxwidth}{\usebox\auone@box}
     \sbox\autwo@box{\begin{tabular}{c}\APAauthformat #3\\\APAauthformat #4\end{tabular}}
     \settowidth{\autwo@boxwidth}{\usebox\autwo@box}
     \ifdim\auone@boxwidth<1.25\columnwidth
      \ifdim\autwo@boxwidth<1.25\columnwidth
       \sbox\autot@box{\usebox\auone@box\hspace{0.4in}\usebox\autwo@box}
       \settowidth{\autot@boxwidth}{\usebox\autot@box}
       \ifdim\autot@boxwidth<\textwidth
        \let\disp@authaffil\uneven@d@authaffil
       \fi
      \fi
     \fi
     \ifdim\auone@boxwidth<\columnwidth
      \ifdim\autwo@boxwidth<\columnwidth
       \let\disp@authaffil\default@d@authaffil
      \fi
     \fi
     \disp@authaffil{#1}{#2}{#3}{#4}
}

\def\APAmaketitle{
 \check@author
\twocolumn[  % anything appearing within the brackets is set in one-column mode
  \vspace{0.03in}
  \begin{center}
  {\APAtitleformat\@APAtitle}\\
  \vspace{-0.05in}
      \@ifundefined{@authorTwo}{
    % one author-affiliation
      \put@one@authaffil{\@APAauthor}{\@affil}}{
      \@ifundefined{@authorThree}{
    % two authors-affiliations
      \put@two@authaffil{\@authorOne}{\@affilOne}{\@authorTwo}{\@affilTwo}}{
      \@ifundefined{@authorFour}{
    % three authors-affiliations
      \@ifundefined{@twofirst}{
    % first one, then two
      \put@one@authaffil{\@authorOne}{\@affilOne}\vspace{-0.15in}\\
      \put@two@authaffil{\@authorTwo}{\@affilTwo}{\@authorThree}{\@affilThree}
      }{
    % first two, then one
      \put@two@authaffil{\@authorOne}{\@affilOne}{\@authorTwo}{\@affilTwo}\vspace{-0.15in}\\
      \put@one@authaffil{\@authorThree}{\@affilThree}
      }}{
      \@ifundefined{@authorFive}{ % 2006/01/05 as contributed by Aaron Geller
    % four authors-affiliations
      \put@two@authaffil{\@authorOne}{\@affilOne}{\@authorTwo}{\@affilTwo}\vspace{-0.15in}\\
      \put@two@authaffil{\@authorThree}{\@affilThree}{\@authorFour}{\@affilFour}
      }{                          % 2006/01/05 beginning of Aaron Geller contribution
      \@ifundefined{@authorSix}{ % -- thp 2006/01/05
    % five authors-affiliations
      \put@two@authaffil{\@authorOne}{\@affilOne}{\@authorTwo}{\@affilTwo}\vspace{-0.15in}\\
      \put@two@authaffil{\@authorThree}{\@affilThree}{\@authorFour}{\@affilFour}%
      \vspace{-0.15in}\\ % thp added negative vertical space
      \put@one@authaffil{\@authorFive}{\@affilFive}
      }{                          % 2006/01/05 end of Aaron Geller contribution
    % six authors-affiliations
    %% --- thp 2006/01/05 beginning of six-author display
      \put@two@authaffil{\@authorOne}{\@affilOne}{\@authorTwo}{\@affilTwo}\vspace{-0.15in}\\
      \put@two@authaffil{\@authorThree}{\@affilThree}{\@authorFour}{\@affilFour}\vspace{-0.15in}\\
      \put@two@authaffil{\@authorFive}{\@affilFive}{\@authorSix}{\@affilSix}
    %% --- thp 2006/01/05 end of six-author display
      }}}}}
      \@ifundefined{@APAnote}
       {\vspace{0.07in}}
       {\vspace{0.07in}\\ {\APAauthformat\@APAnote\vspace{0.07in}}}


  \@ifundefined{@APAabstract}
  {\par }
  {\par \parbox{4.6875in}
   {\small \noindent \@APAabstract
     \@ifundefined{@APAkeywords}{}{%
      \par\vspace{0.12in}\raggedright\textit{\keywordname:} \@APAkeywords%
     }%
   }
   \vspace{0.24in}%
  }
  \end{center}
 ]
 \onecolumn
 }
\endinput